{
    "client_name": "Client name",
    "commit_hash": "1248e6606feb3279a94104df6c6dfcb8d46271f4",
    "date": "July 2021",
    "date_interval": "October 15 to November 15, 2020",
    "issues": [
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nA user can call `registerDeposit` when the vault is locked to add their own funds for the next investment round.\r\n\r\nAfter enough time passes and the round is closed, by calling `closePositions`, the user can come back to the contract to retrieve their locked funds, along with the realized yields.\r\n\r\nIn order to do this, they need to call `claimShares`.\r\n\r\nThe method calculates how many tokens they should have received, in case they were to join when the vault was unlocked, and transfers those tokens to the depositor.\r\n\r\nThe calculated value can be zero, either in case the depositor never added tokens, or the depositor already claimed their tokens. However, the transfer happens either way, for 0 tokens or for a positive value of tokens.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/blob/518e4f6d174cae6ee75e316ad56789aaeb695069/code/contracts/core/OpynPerpVault.sol#L268-L271\r\n\r\n**Recommendation**\r\n\r\nIt might help users (from a UX point of view) and the contract to only send tokens when there are tokens to send. Consider transferring only if there is a positive amount to be sent.\r\n\r\nThis will reduce the number of events the contract emits, and the user knows before committing the transaction if they will receive tokens or not.",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/5/comments",
            "created_at": "2021-07-27T14:57:35Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/5/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/5",
            "id": 953973254,
            "labels": [
                {
                    "color": "FF9500",
                    "default": false,
                    "description": null,
                    "id": 3203450887,
                    "name": "Medium",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwODg3",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Medium"
                },
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3203450744,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwNzQ0",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Report"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/5/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NTM5NzMyNTQ=",
            "number": 5,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07",
            "state": "open",
            "title": "`claimShares` should send tokens only if there something to transfer",
            "updated_at": "2021-07-27T14:57:42Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/5",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nA user can deposit funds in the vault by calling `deposit()` or `registerDeposit()`.\r\n\r\nWhen they are called, the total amount of locked funds are checked to be up to the specified limit, called the `cap`.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/blob/518e4f6d174cae6ee75e316ad56789aaeb695069/code/contracts/core/OpynPerpVault.sol#L406\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/blob/518e4f6d174cae6ee75e316ad56789aaeb695069/code/contracts/core/OpynPerpVault.sol#L248\r\n\r\nThe check makes sure the amount of funds is strictly less than the limit. This will force the last user joining the vault to send an awkward amount of funds (similar to `99999999`). Allowing the total amount of funds to equal will make the user experience better, and also the total reported amount of funds displayed will be easier to the eye.\r\n\r\n**Recommendation**\r\n\r\nChange the `require` to accept the sum of deposited amounts to also be equal to the cap.\r\n",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/4/comments",
            "created_at": "2021-07-27T11:24:36Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/4/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/4",
            "id": 953781547,
            "labels": [
                {
                    "color": "FF9500",
                    "default": false,
                    "description": null,
                    "id": 3203450887,
                    "name": "Medium",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwODg3",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Medium"
                },
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3203450744,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwNzQ0",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Report"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/4/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NTM3ODE1NDc=",
            "number": 4,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07",
            "state": "open",
            "title": "Depositing should allow up to or equal to the cap",
            "updated_at": "2021-07-27T11:24:36Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/4",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nWhen the total reported amount of assets is estimated by the actions, the storage variable `actions.length` is used. This value does not change over time (in this loop) and can be cached in a local variable, instead of retrieving the value from the storage.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/blob/518e4f6d174cae6ee75e316ad56789aaeb695069/code/contracts/core/OpynPerpVault.sol#L393-L395\r\n\r\n**Recommendation**\r\n\r\nCache the length locally and use the local variable in the loop.\r\n\r\n",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/3/comments",
            "created_at": "2021-07-27T09:53:07Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/3/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/3",
            "id": 953707223,
            "labels": [
                {
                    "color": "FFCC00",
                    "default": false,
                    "description": null,
                    "id": 3203450854,
                    "name": "Minor",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwODU0",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Minor"
                },
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3203450744,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwNzQ0",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Report"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/3/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NTM3MDcyMjM=",
            "number": 3,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07",
            "state": "open",
            "title": "Cache the length of actions when looping over them",
            "updated_at": "2021-07-27T09:53:07Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/3",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nThe owner can call `setCap` to set a new limit for the accepted funds.\r\n\r\nAfter the cap was updated, an event is emitted.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/blob/518e4f6d174cae6ee75e316ad56789aaeb695069/code/contracts/core/OpynPerpVault.sol#L200\r\n\r\nWhen the event is emitted, the storage variable is used. This forces the an expensive `SLOAD` operation.\r\n\r\n**Recommendation**\r\n\r\nUse the argument received in the method when emitting the event instead of the storage variable.\r\n",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/2/comments",
            "created_at": "2021-07-27T09:31:59Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/2/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/2",
            "id": 953690100,
            "labels": [
                {
                    "color": "FFCC00",
                    "default": false,
                    "description": null,
                    "id": 3203450854,
                    "name": "Minor",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwODU0",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Minor"
                },
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3203450744,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwNzQ0",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Report"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/2/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NTM2OTAxMDA=",
            "number": 2,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07",
            "state": "open",
            "title": "Improve gas costs by reducing the use of state variables when possible",
            "updated_at": "2021-07-27T09:51:18Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/2",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nThe `LockState` modifier updates the `state` contract variable to `VaultState.Locked`:\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/blob/d94fcb2e2173008272604705a9fc618710349462/code/contracts/core/OpynPerpVault.sol#L116-L120\r\n\r\nThe issue is that the documentation above is confusing.\r\n\r\n**Recommendation**\r\n\r\nReword the documentation text to read (_should_ instead of _can_):\r\n\r\n> should only be executed in the unlocked state\r\n",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/1/comments",
            "created_at": "2021-07-27T04:52:29Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/1/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/1",
            "id": 953500444,
            "labels": [
                {
                    "color": "FFCC00",
                    "default": false,
                    "description": null,
                    "id": 3203450854,
                    "name": "Minor",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwODU0",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Minor"
                },
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3203450744,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjAzNDUwNzQ0",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/labels/Report"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/1/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NTM1MDA0NDQ=",
            "number": 1,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07",
            "state": "open",
            "title": "OpynPerpVault.onlyLocked() documentation update",
            "updated_at": "2021-07-27T04:52:29Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-perp-vault-templates-2021-07/issues/1",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/342638?v=4",
                "events_url": "https://api.github.com/users/andreiashu/events{/privacy}",
                "followers_url": "https://api.github.com/users/andreiashu/followers",
                "following_url": "https://api.github.com/users/andreiashu/following{/other_user}",
                "gists_url": "https://api.github.com/users/andreiashu/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andreiashu",
                "id": 342638,
                "login": "andreiashu",
                "node_id": "MDQ6VXNlcjM0MjYzOA==",
                "organizations_url": "https://api.github.com/users/andreiashu/orgs",
                "received_events_url": "https://api.github.com/users/andreiashu/received_events",
                "repos_url": "https://api.github.com/users/andreiashu/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andreiashu/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andreiashu/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andreiashu"
            }
        }
    ],
    "person_days": "5",
    "project_name": "Project name",
    "review_period": "2 weeks",
    "source_repository": "https://github.com/opynfinance/perp-vault-templates",
    "template": "./Readme.md.mustache"
}